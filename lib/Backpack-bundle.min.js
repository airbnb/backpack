((function(){"use strict";var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d=Object.prototype.hasOwnProperty,e=function(a,b){function e(){this.constructor=a}for(var c in b)d.call(b,c)&&(a[c]=b[c]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};b=typeof exports!="undefined"&&exports!==null?exports:this,a=b.Backpack={VERSION:"0.0.1",Prefix:"backpack",Emitter:_.clone(Backbone.Events)},a.Component=function(b){function d(){this.slug=c(this.slug,this),this.setContent=c(this.setContent,this),this.getLayout=c(this.getLayout,this),this.hasLayout=c(this.hasLayout,this),this.layout=c(this.layout,this),this.isRendered=c(this.isRendered,this),this.getItems=c(this.getItems,this),this.items=c(this.items,this),this.name=c(this.name,this),this.css=c(this.css,this),this.removeClass=c(this.removeClass,this),this.addClass=c(this.addClass,this),this.parent=c(this.parent,this),this.content=c(this.content,this),this.prepend=c(this.prepend,this),this.append=c(this.append,this),this.after=c(this.after,this),this.before=c(this.before,this),this.remove=c(this.remove,this),this.close=c(this.close,this),this.hide=c(this.hide,this),this.show=c(this.show,this),this.visible=c(this.visible,this),this.getType=c(this.getType,this),this.type=c(this.type,this),this.getRenderEl=c(this.getRenderEl,this),this.renderEl=c(this.renderEl,this),this.renderType=c(this.renderType,this),this.render=c(this.render,this),d.__super__.constructor.apply(this,arguments)}return e(d,b),d.prototype.tagName="div",d.prototype.className="backpack-component",d.prototype.defaults={parent:"body",type:"component",renderType:"append",content:null,visible:!0},d.prototype.initialize=function(){var a,b,c,d,e,f;this._items=[],this._rendered=!1,this._renderTypes=["append","prepend","html"],this.options=_.extend({},this.defaults,this.config,this.options),c=this.options,f=[];for(b in c)a=c[b],_.isArray(a)?(e=this[b])!=null&&typeof e.apply=="function"&&e.apply(this,a):(d=this[b])!=null&&typeof d.call=="function"&&d.call(this,a),f.push(null);return f},d.prototype.render=function(){return this.$parent[this._renderType].call(this.$parent,this.getRenderEl()),this._rendered=!0,this},d.prototype.renderType=function(a){var b;return b=_.include(this._renderTypes,a),b?(this._renderType=a,this):this},d.prototype.renderEl=function(a){return this._renderEl=a,this},d.prototype.getRenderEl=function(){return this._renderEl!=null?this._renderEl:this.el},d.prototype.type=function(b){return this._type=this.slug(""+a.Prefix+" "+b),this.addClass(this._type),this},d.prototype.getType=function(){return this._type},d.prototype.visible=function(a){return a?this.show():this.hide(),this},d.prototype.show=function(){return this.isRendered()||this.render(),this.delegateEvents(this.events),this.$el.removeClass("hide"),this._visible=!0,this},d.prototype.hide=function(){return this.$el.addClass("hide"),this.undelegateEvents(),this._visible=!1,this},d.prototype.close=function(){return this.hide(),this.remove(),this},d.prototype.remove=function(){return this.undelegateEvents(),d.__super__.remove.call(this),this},d.prototype.before=function(a){return a=this.setContent(a),this.$el.before(a),this},d.prototype.after=function(a){return a=this.setContent(a),this.$el.after(a),this},d.prototype.append=function(a){return a=this.setContent(a),this.$el.append(a),this},d.prototype.prepend=function(a){return a=this.setContent(a),this.$el.prepend(a),this},d.prototype.content=function(a){var b;return a==null?this:(this._content=this.setContent(a),b=this.make("div",{"class":"content clearfix"},this._content),this.$el.append(b),this)},d.prototype.parent=function(a){return a==null?this:(this.$parent=$(a),this)},d.prototype.addClass=function(a){return this.$el.addClass(a),this},d.prototype.removeClass=function(a){return this.$el.removeClass(a),this},d.prototype.css=function(a){return this.$el.css(a),this},d.prototype.name=function(a){return this.name=this.addClass(this.slug(a)),this},d.prototype.items=function(){var a,b,c;for(b=0,c=arguments.length;b<c;b++)a=arguments[b],this._items.push(a);return this},d.prototype.getItems=function(){return this._items},d.prototype.isRendered=function(){return this._rendered},d.prototype.layout=function(a){return this._layout=a,this},d.prototype.hasLayout=function(){return!!this._layout},d.prototype.getLayout=function(){return this._layout},d.prototype.setContent=function(a){return a==null?this:a.el!=null?a.render!=null?a=a.render().el:a=a.el:a=a},d.prototype.slug=function(a){return a==null?this:a.toLowerCase().replace(/\ +/g,"-").replace(/[^a-z0-9-]/g,"")},d}(Backbone.View),a.Layout=function(a){function b(){this.wrap=c(this.wrap,this),this.gutter=c(this.gutter,this),this.columnWidth=c(this.columnWidth,this),this.columns=c(this.columns,this),this.add=c(this.add,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.tagName="div",b.prototype.config={type:"layout",columns:1,gutter:"30"},b.prototype.initialize=function(){return this.addClass("clearfix"),b.__super__.initialize.call(this),this},b.prototype.add=function(){var a,b,c,d,e,f,g;this.columns(arguments.length),this.columnWidth(),g=[];for(e=0,f=arguments.length;e<f;e++)c=arguments[e],_.isFunction(c)?a=c:(a=c.content,d=c.span),d||(d=1),b=this.setContent(a),b=this.wrap(b,d),g.push(this.append(b));return g},b.prototype.columns=function(a){return this._cols=a,this._remaining=a,this},b.prototype.columnWidth=function(){var a,b;return b=this.$parent.width(),a=b-this._cols*this._gutter,this._colWidth=a/this._cols,this},b.prototype.gutter=function(a){return this.css({"margin-left":"-"+a+"px"}),this._gutter=a,this},b.prototype.wrap=function(a,b){var c,d;return c="float: left; width: "+this._colWidth*b+"px; margin-left: "+this._gutter+"px",d=this.make("div",{style:c},a)},b}(a.Component),a.Menu=function(b){function d(){this.add=c(this.add,this),d.__super__.constructor.apply(this,arguments)}return e(d,b),d.prototype.tagName="ul",d.prototype.initialize=function(){return d.__super__.initialize.call(this),this.addClass("backpack-menu"),this},d.prototype.add=function(){var b,c,d,e;for(d=0,e=arguments.length;d<e;d++)b=arguments[d],b.el?c=b:c=new a.MenuItem(b),this.append(c.show().el);return this},d}(a.Component),a.MenuItem=function(a){function b(){this.content=c(this.content,this),this.render=c(this.render,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.tagName="li",b.prototype.template=_.template("<a href='<%= href %>'><%= content %></a>"),b.prototype.initialize=function(){var a,c,d;return this.addClass("backpack-menu-item"),b.__super__.initialize.call(this),d=this.options,a=d.content,c=d.events,this.content(a,c),this.delegateEvents(this.events),this},b.prototype.render=function(){return this.$el.html(this._content),this},b.prototype.content=function(a,b){return b==null&&(b={}),a.el!=null?(this._content=a.el,this):_.isString(b)?(this._content=this.template({href:b,content:a}),this):_.isFunction(b)?(this.events={click:b},this._content=this.template({href:"javascript:void(0);",content:a}),this):(this.events=b,this._content=this.template({href:"javascript:void(0);",content:a}),this)},b}(a.Component),a.Overlay=function(a){function b(){this.remove=c(this.remove,this),this.color=c(this.color,this),this.lockOverlay=c(this.lockOverlay,this),this.close=c(this.close,this),this.unlock=c(this.unlock,this),this.show=c(this.show,this),this.content=c(this.content,this),this.render=c(this.render,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.template="<div class='backpack-overlay-outer'>\n  <div class='backpack-overlay-inner'>\n    <div class='backpack-overlay-container'></div>\n  </div>\n</div>",b.prototype.events={click:"unlock","click .backpack-overlay-container":function(a){return a.stopPropagation()}},b.prototype.config={type:"overlay",color:"rgba(0,0,0,0.7)",renderType:"prepend",lockOverlay:!1},b.prototype.initialize=function(){return this.append(this.template),b.__super__.initialize.call(this)},b.prototype.render=function(){return this.$(".backpack-overlay-container").html(this._content),b.__super__.render.call(this),this},b.prototype.content=function(a){return a==null?this:(this._content=this.setContent(a),this)},b.prototype.show=function(){return b.__super__.show.call(this),this.$parent.addClass("overlay"),this},b.prototype.unlock=function(){return this._lockOverlay||this.close(),this},b.prototype.close=function(){return b.__super__.close.call(this),this.trigger("overlay-close"),this},b.prototype.lockOverlay=function(a){return this._lockOverlay=!!a,this},b.prototype.color=function(a){return this.el.style.backgroundColor=a,this},b.prototype.remove=function(){return this.$parent.removeClass("overlay"),b.__super__.remove.call(this),this},b}(a.Component),a.Modal=function(b){function d(){this.newOverlay=c(this.newOverlay,this),this.closable=c(this.closable,this),this.title=c(this.title,this),this.remove=c(this.remove,this),this.close=c(this.close,this),this.hide=c(this.hide,this),this.show=c(this.show,this),d.__super__.constructor.apply(this,arguments)}return e(d,b),d.prototype.events={"click .close":"close"},d.prototype.config={type:"modal",closable:!0,lockOverlay:!0},d.prototype.initialize=function(){return d.__super__.initialize.call(this),this.newOverlay(),this},d.prototype.show=function(){var a;return d.__super__.show.call(this),(a=this.overlay)!=null&&a.show(),this},d.prototype.hide=function(){var a;return d.__super__.hide.call(this),(a=this.overlay)!=null&&a.hide(),this},d.prototype.close=function(){var a;return d.__super__.close.call(this),(a=this.overlay)!=null&&a.remove(),this},d.prototype.remove=function(){var a;return d.__super__.remove.call(this),(a=this.overlay)!=null&&a.remove(),this},d.prototype.title=function(a){return this._title=a,this.prepend("<span class='title'>"+a+"</span>"),this},d.prototype.closable=function(){return arguments[0]?(this.prepend("<span class='close'>&times;</span>"),this):this},d.prototype.newOverlay=function(){return this.overlay=new a.Overlay({lockOverlay:this.options.lockOverlay,content:this.el,color:this.options.color}),this.overlay.on("overlay-close",this.close),this},d}(a.Component),a.Tabs=function(b){function d(){this.exit=c(this.exit,this),this.select=c(this.select,this),this.setActive=c(this.setActive,this),this.setTab=c(this.setTab,this),this.add=c(this.add,this),d.__super__.constructor.apply(this,arguments)}return e(d,b),d.prototype.tagName="ul",d.prototype.config={type:"tabs"},d.prototype.initialize=function(){var a;return this.addClass("clearfix"),this.active=(a=this.options.active)!=null?a:0,d.__super__.initialize.call(this)},d.prototype.add=function(){var b,c,d,e;for(d=0,e=arguments.length;d<e;d++)b=arguments[d],b=_.extend(b,{parent:this}),b.el?c=b:c=new a.Tab(b),this.setTab(c);return this.setActive(),this},d.prototype.setTab=function(a){return a.on("tab-click",this.select),a.on("tab-exit",this.exit),this.append(a.show().el),this._items.push(a),this},d.prototype.setActive=function(){var a;return a=this._items[this.active],a.addClass("backpack-tab-active"),this.select(a),this},d.prototype.select=function(a){var b;return b=this._items[this.active],b.trigger("tab-exit",b),this.active=_.indexOf(this._items,a),a.addClass("backpack-tab-active"),this.$el.next(".backpack-tab-content").remove(),this.after(a.tabContent.show().el),this},d.prototype.exit=function(a){return a.removeClass("backpack-tab-active"),this},d}(a.Component),a.Tab=function(b){function d(){this.select=c(this.select,this),this.content=c(this.content,this),d.__super__.constructor.apply(this,arguments)}return e(d,b),d.prototype.tagName="li",d.prototype.template=_.template("<a class='round-top' href='<%= href %>'><%= content %></a>"),d.prototype.events={click:"select"},d.prototype.config={type:"tab",renderType:"html",renderEl:d._content},d.prototype.initialize=function(){return d.__super__.initialize.call(this),this.tabContent=new a.TabContent({content:this.options.tabContent,parent:this.$parent})},d.prototype.content=function(a){return a==null?this:(a=this.setContent(a),this._content=this.template({href:"javascript:void(0);",content:a}),this)},d.prototype.select=function(){return this.trigger("tab-click",this),this},d}(a.Component),a.TabContent=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.config={type:"tab-content",renderType:"html",renderEl:b._content},b.prototype.initialize=function(){return b.__super__.initialize.call(this)},b}(a.Component)})).call(this);